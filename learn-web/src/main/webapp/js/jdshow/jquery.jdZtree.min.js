/** 扩展Ztree结构**/
(function($) {
	$.fn.jdZtree = function(options) {
		options = options || {};
		var setting = $.extend(true, {}, $.fn.jdZtree.defaults, options);
		return this.each(function(){
			initTree($(this).data("setting",setting));
		});
	}
	
	function initTree($dom) {
		var setting = $dom.data("setting");
		$.ajax({
			url: setting.url,
			type: setting.type,
			timeout: setting.timeout,
			async: setting.async,
			dataType:setting.dataType,
			data:setting.data,
			success: function(zNodes) {
				$.fn.zTree.init($dom, setting.treeSetting, zNodes);
			}
		});
	}
	
	$.fn.jdZtree.defaults = {
			url: null,
			async:true,
			dataType:"json",
			timeout:10000,
			type:"POST",
			data:{},
			treeSetting: {
				view: {
					selectedMulti: true
				},
				check: {
					enable: true
				},
				data: {
					simpleData: {
						enable: true
					}
				}
			}
	};
})(jQuery);