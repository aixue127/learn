(function($) {
	/** form 表单提交 */
	$.fn.jdshowFormAjax = function(options) {
		var setting = $.extend({},$.fn.jdshowFormAjax.defaults, options);
		$.ajax({
			url: setting.url,
			type: setting.type,
			timeout: setting.timeout,
			async: setting.async,
			dataType:setting.dataType,
			data: setting.serializeType=="object"?this.serialize():this.serializeArray(),
			success: function(data) {
				setting.success(data);
			}
		});
	};
	
	/** Gird行 删除 */
	$.fn.jdshowGridDelAjax = function(options) {
		var rows = this.datagrid('getSelections');
		if(rows == null) {
			$.messager.alert('notice','Place selected Rows!','info');
			return ;
		}
		
		$.messager.confirm('notice', 'delete Yes Or Not?', function(r){
			if (r){
				var setting = $.extend({}, $.fn.jdshowGridDelAjax.defaults, options);
				var arows = [];
				for(var k=0;k<rows.length;k++) {
					arows.push(rows[k].id);
				}
				console.log("---->" +arows.join(","));
				$.ajax({
					url: setting.url,
					type: setting.type,
					timeout: setting.timeout,
					async: setting.async,
					dataType:setting.dataType,
					data: {id: arows.join(",")},
					success: function(data) {
						setting.success(data);
					}
				});
			}
		});
	};
	
	$.fn.jdshowGridDelAjax.defaults = $.fn.jdshowFormAjax.defaults = {
		url: null,
		success: null,
		async:true,
		dataType:"json",
		timeout:10000,
		type:"POST",
		serializeType:"object" // object 对象, array 数组
	}
	
})(jQuery);